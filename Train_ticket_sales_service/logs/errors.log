ERROR 2022-11-30 14:15:22,056 purchase_handler 17536 17868 PurchasedTicket() got unexpected keyword arguments: 'voyage_info', 'voyage_pk', 'departure_station_name', 'departure_datetime', 'arrival_station_name', 'arrival_datetime'
ERROR 2022-11-30 14:15:28,433 tasks 13908 19364 list index out of range
ERROR 2022-11-30 14:17:41,930 purchase_handler 15928 12196 PurchasedTicket() got unexpected keyword arguments: 'voyage_info', 'voyage_pk', 'departure_station_name', 'departure_datetime', 'arrival_station_name', 'arrival_datetime'
ERROR 2022-11-30 14:17:47,956 tasks 13908 19364 list index out of range
ERROR 2022-12-04 00:04:59,338 purchase_handler 32940 33068 'voyage_pk'
ERROR 2022-12-04 00:12:51,756 purchase_handler 24196 32968 'voyage'
ERROR 2022-12-04 00:29:11,446 purchase_handler 35936 23228 [WinError 10061] Подключение не установлено, т.к. конечный компьютер отверг запрос на подключение
ERROR 2022-12-04 00:30:49,011 purchase_handler 35936 23228 [WinError 10061] Подключение не установлено, т.к. конечный компьютер отверг запрос на подключение
ERROR 2022-12-04 00:32:28,377 log 36048 37152 Internal Server Error: /search/voyages/3/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 78, in dispatch
    return super(DetailedVoyageView, self).dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\edit.py", line 153, in post
    return self.form_valid(form)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 82, in form_valid
    purchase_status = purchase_handler.process_purchase()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 34, in process_purchase
    self.generate_tickets_and_send_email(seat_numbers, voyage, db_ticket_data.copy())
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 68, in generate_tickets_and_send_email
    es.send_purchased_tickets(self.data['customers_email'], pdfs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\classes.py", line 22, in send_purchased_tickets
    email.send()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\mail\message.py", line 298, in send
    return self.get_connection(fail_silently).send_messages([self])
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\mail\backends\smtp.py", line 124, in send_messages
    new_conn_created = self.open()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\mail\backends\smtp.py", line 80, in open
    self.connection = self.connection_class(
  File "C:\Users\Matvey\AppData\Local\Programs\Python\Python310\lib\smtplib.py", line 255, in __init__
    (code, msg) = self.connect(host, port)
  File "C:\Users\Matvey\AppData\Local\Programs\Python\Python310\lib\smtplib.py", line 341, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File "C:\Users\Matvey\AppData\Local\Programs\Python\Python310\lib\smtplib.py", line 312, in _get_socket
    return socket.create_connection((host, port), timeout,
  File "C:\Users\Matvey\AppData\Local\Programs\Python\Python310\lib\socket.py", line 845, in create_connection
    raise err
  File "C:\Users\Matvey\AppData\Local\Programs\Python\Python310\lib\socket.py", line 833, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] Подключение не установлено, т.к. конечный компьютер отверг запрос на подключение
ERROR 2022-12-04 00:32:28,849 basehttp 36048 37152 "POST /search/voyages/3/?departure_en_route=15&arrival_en_route=18 HTTP/1.1" 500 154983
ERROR 2022-12-04 01:03:58,863 exception 34416 27316 Invalid HTTP_HOST header: '127.0.0.1:8000'. You may need to add '127.0.0.1' to ALLOWED_HOSTS.
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\utils\deprecation.py", line 135, in __call__
    response = self.process_request(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\middleware\common.py", line 48, in process_request
    host = request.get_host()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\http\request.py", line 148, in get_host
    raise DisallowedHost(msg)
django.core.exceptions.DisallowedHost: Invalid HTTP_HOST header: '127.0.0.1:8000'. You may need to add '127.0.0.1' to ALLOWED_HOSTS.
ERROR 2022-12-04 01:04:00,467 exception 34416 34376 Invalid HTTP_HOST header: '127.0.0.1:8000'. You may need to add '127.0.0.1' to ALLOWED_HOSTS.
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\utils\deprecation.py", line 135, in __call__
    response = self.process_request(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\middleware\common.py", line 48, in process_request
    host = request.get_host()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\http\request.py", line 148, in get_host
    raise DisallowedHost(msg)
django.core.exceptions.DisallowedHost: Invalid HTTP_HOST header: '127.0.0.1:8000'. You may need to add '127.0.0.1' to ALLOWED_HOSTS.
ERROR 2022-12-26 23:00:33,070 log 63960 57992 Internal Server Error: /rest_api/purchased_tickets/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 446, in get_attribute
    return get_attribute(instance, self.source_attrs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 96, in get_attribute
    instance = getattr(instance, attr)
AttributeError: 'PurchasedTicket' object has no attribute 'name'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\generics.py", line 239, in get
    return self.list(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\mixins.py", line 46, in list
    return Response(serializer.data)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 768, in data
    ret = super().data
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 253, in data
    self._data = self.to_representation(self.instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 686, in to_representation
    return [
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 687, in <listcomp>
    self.child.to_representation(item) for item in iterable
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 509, in to_representation
    attribute = field.get_attribute(instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 479, in get_attribute
    raise type(exc)(msg)
AttributeError: Got AttributeError when attempting to get a value for field `name` on serializer `TrainSerializer`.
The serializer field might be named incorrectly and not match any attribute or key on the `PurchasedTicket` instance.
Original exception text was: 'PurchasedTicket' object has no attribute 'name'.
ERROR 2022-12-26 23:00:33,565 basehttp 63960 57992 "GET /rest_api/purchased_tickets/ HTTP/1.1" 500 176259
ERROR 2022-12-26 23:00:51,176 log 63960 57992 Internal Server Error: /rest_api/purchased_tickets/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 446, in get_attribute
    return get_attribute(instance, self.source_attrs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 96, in get_attribute
    instance = getattr(instance, attr)
AttributeError: 'PurchasedTicket' object has no attribute 'name'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\generics.py", line 239, in get
    return self.list(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\mixins.py", line 46, in list
    return Response(serializer.data)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 768, in data
    ret = super().data
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 253, in data
    self._data = self.to_representation(self.instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 686, in to_representation
    return [
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 687, in <listcomp>
    self.child.to_representation(item) for item in iterable
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 509, in to_representation
    attribute = field.get_attribute(instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 479, in get_attribute
    raise type(exc)(msg)
AttributeError: Got AttributeError when attempting to get a value for field `name` on serializer `TrainSerializer`.
The serializer field might be named incorrectly and not match any attribute or key on the `PurchasedTicket` instance.
Original exception text was: 'PurchasedTicket' object has no attribute 'name'.
ERROR 2022-12-26 23:00:51,631 basehttp 63960 57992 "GET /rest_api/purchased_tickets/ HTTP/1.1" 500 176396
ERROR 2022-12-27 00:20:40,391 log 55680 64852 Internal Server Error: /rest_api/voyages/1/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\generics.py", line 208, in get
    return self.retrieve(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\mixins.py", line 54, in retrieve
    instance = self.get_object()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\generics.py", line 88, in get_object
    assert lookup_url_kwarg in self.kwargs, (
AssertionError: Expected view RetrieveVoyageApiView to be called with a URL keyword argument named "pk". Fix your URL conf, or set the `.lookup_field` attribute on the view correctly.
ERROR 2022-12-27 00:20:40,801 basehttp 55680 64852 "GET /rest_api/voyages/1/ HTTP/1.1" 500 118041
ERROR 2022-12-27 01:33:58,935 log 19624 69184 Internal Server Error: /rest_api/voyages/1/2/2022-09-09/1/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\request.py", line 416, in __getattr__
    return getattr(self._request, attr)
AttributeError: 'WSGIRequest' object has no attribute 'kwargs'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\generics.py", line 199, in get
    return self.list(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\mixins.py", line 38, in list
    queryset = self.filter_queryset(self.get_queryset())
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 26, in get_queryset
    print(self.request.kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\request.py", line 418, in __getattr__
    return self.__getattribute__(attr)
AttributeError: 'Request' object has no attribute 'kwargs'
ERROR 2022-12-27 01:33:59,366 basehttp 19624 69184 "GET /rest_api/voyages/1/2/2022-09-09/1/ HTTP/1.1" 500 125934
ERROR 2022-12-27 01:54:56,509 log 61544 68264 Internal Server Error: /rest_api/voyages/1/2/2022-09-09/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\generics.py", line 199, in get
    return self.list(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\mixins.py", line 38, in list
    queryset = self.filter_queryset(self.get_queryset())
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 35, in get_queryset
    finder = VoyageFinder({'departure_station': departure_station.slug, 'arrival_station': arrival_station.slug,
UnboundLocalError: local variable 'departure_station' referenced before assignment
ERROR 2022-12-27 01:54:56,947 basehttp 61544 68264 "GET /rest_api/voyages/1/2/2022-09-09/ HTTP/1.1" 500 117837
ERROR 2022-12-27 01:57:16,573 log 61544 67344 Internal Server Error: /rest_api/voyages/1/2/2022-08-31/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\generics.py", line 199, in get
    return self.list(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\mixins.py", line 38, in list
    queryset = self.filter_queryset(self.get_queryset())
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 35, in get_queryset
    finder = VoyageFinder({'departure_station': departure_station.slug, 'arrival_station': arrival_station.slug,
UnboundLocalError: local variable 'departure_station' referenced before assignment
ERROR 2022-12-27 01:57:17,013 basehttp 61544 67344 "GET /rest_api/voyages/1/2/2022-08-31/ HTTP/1.1" 500 116593
ERROR 2022-12-27 01:58:02,450 log 15900 21692 Internal Server Error: /rest_api/voyages/1/2/2022-08-31/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 446, in get_attribute
    return get_attribute(instance, self.source_attrs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 96, in get_attribute
    instance = getattr(instance, attr)
AttributeError: 'VoyageDisplayObject' object has no attribute 'departure_datetime'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\generics.py", line 199, in get
    return self.list(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\mixins.py", line 46, in list
    return Response(serializer.data)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 768, in data
    ret = super().data
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 253, in data
    self._data = self.to_representation(self.instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 686, in to_representation
    return [
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 687, in <listcomp>
    self.child.to_representation(item) for item in iterable
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 509, in to_representation
    attribute = field.get_attribute(instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 479, in get_attribute
    raise type(exc)(msg)
AttributeError: Got AttributeError when attempting to get a value for field `departure_datetime` on serializer `VoyageSerializer`.
The serializer field might be named incorrectly and not match any attribute or key on the `VoyageDisplayObject` instance.
Original exception text was: 'VoyageDisplayObject' object has no attribute 'departure_datetime'.
ERROR 2022-12-27 01:58:02,974 basehttp 15900 21692 "GET /rest_api/voyages/1/2/2022-08-31/ HTTP/1.1" 500 155796
ERROR 2022-12-28 22:10:58,663 log 73556 68228 Internal Server Error: /rest_api/voyages/1/2/2022-08-31/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\generics.py", line 199, in get
    return self.list(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\mixins.py", line 46, in list
    return Response(serializer.data)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 768, in data
    ret = super().data
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 253, in data
    self._data = self.to_representation(self.instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 686, in to_representation
    return [
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 687, in <listcomp>
    self.child.to_representation(item) for item in iterable
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 507, in to_representation
    for field in fields:
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 368, in _readable_fields
    for field in self.fields.values():
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\utils\functional.py", line 57, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 356, in fields
    for key, value in self.get_fields().items():
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 1027, in get_fields
    assert hasattr(self, 'Meta'), (
AssertionError: Class VoyagesSearchResultSerializer missing "Meta" attribute
ERROR 2022-12-28 22:10:59,112 basehttp 73556 68228 "GET /rest_api/voyages/1/2/2022-08-31/ HTTP/1.1" 500 149220
ERROR 2022-12-28 22:55:41,161 log 75372 64460 Internal Server Error: /rest_api/voyages/1/29/2022-08-31/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\generics.py", line 199, in get
    return self.list(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\mixins.py", line 46, in list
    return Response(serializer.data)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 768, in data
    ret = super().data
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 253, in data
    self._data = self.to_representation(self.instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 686, in to_representation
    return [
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\template\response.py", line 127, in __iter__
    raise ContentNotRenderedError(
django.template.response.ContentNotRenderedError: The response content must be rendered before it can be iterated over.
ERROR 2022-12-28 22:55:41,582 basehttp 75372 64460 "GET /rest_api/voyages/1/29/2022-08-31/ HTTP/1.1" 500 141008
ERROR 2022-12-28 23:12:57,933 log 71864 64624 Internal Server Error: /rest_api/voyages/1/29/2022-08-31/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\generics.py", line 199, in get
    return self.list(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\mixins.py", line 46, in list
    return Response(serializer.data)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 768, in data
    ret = super().data
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 253, in data
    self._data = self.to_representation(self.instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 686, in to_representation
    return [
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\template\response.py", line 127, in __iter__
    raise ContentNotRenderedError(
django.template.response.ContentNotRenderedError: The response content must be rendered before it can be iterated over.
ERROR 2022-12-28 23:12:58,329 basehttp 71864 64624 "GET /rest_api/voyages/1/29/2022-08-31/ HTTP/1.1" 500 141007
ERROR 2022-12-28 23:28:55,330 purchase_handler 54032 71856 Error 10061 connecting to localhost:6379. Подключение не установлено, т.к. конечный компьютер отверг запрос на подключение.
ERROR 2022-12-28 23:31:20,638 log 70340 60836 Internal Server Error: /rest_api/voyages/1/2/2022-08-31/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\generics.py", line 199, in get
    return self.list(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\mixins.py", line 38, in list
    queryset = self.filter_queryset(self.get_queryset())
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 33, in get_queryset
    finder = VoyageFinder({'departure_station': departure_station.slug, 'arrival_station': arrival_station.slug,
AttributeError: 'QuerySet' object has no attribute 'slug'
ERROR 2022-12-28 23:31:21,092 basehttp 70340 60836 "GET /rest_api/voyages/1/2/2022-08-31/ HTTP/1.1" 500 117112
ERROR 2022-12-28 23:31:42,291 log 70340 60836 Internal Server Error: /rest_api/voyages/1/2/2022-08-31/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\generics.py", line 199, in get
    return self.list(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\mixins.py", line 38, in list
    queryset = self.filter_queryset(self.get_queryset())
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 33, in get_queryset
    finder = VoyageFinder({'departure_station': departure_station.slug, 'arrival_station': arrival_station.slug,
AttributeError: 'QuerySet' object has no attribute 'slug'
ERROR 2022-12-28 23:31:42,713 basehttp 70340 60836 "GET /rest_api/voyages/1/2/2022-08-31/ HTTP/1.1" 500 117111
ERROR 2022-12-31 17:14:10,466 log 82592 68744 Internal Server Error: /rest_api/voyages/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 511, in dispatch
    self.response = self.finalize_response(request, response, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 423, in finalize_response
    assert isinstance(response, HttpResponseBase), (
AssertionError: Expected a `Response`, `HttpResponse` or `HttpStreamingResponse` to be returned from the view, but received a `<class 'django.db.models.query.QuerySet'>`
ERROR 2022-12-31 17:14:10,914 basehttp 82592 68744 "GET /rest_api/voyages/ HTTP/1.1" 500 97937
ERROR 2022-12-31 17:32:23,968 log 72192 75340 Internal Server Error: /rest_api/voyages/1/2/2022-08-31/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
TypeError: VoyageViewSet.search_voyages() got an unexpected keyword argument 'departure_station'
ERROR 2022-12-31 17:32:24,408 basehttp 72192 75340 "GET /rest_api/voyages/1/2/2022-08-31/ HTTP/1.1" 500 106991
ERROR 2022-12-31 17:32:26,513 log 72192 75340 Internal Server Error: /rest_api/voyages/1/2/2022-08-31/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
TypeError: VoyageViewSet.search_voyages() got an unexpected keyword argument 'departure_station'
ERROR 2022-12-31 17:32:26,902 basehttp 72192 75340 "GET /rest_api/voyages/1/2/2022-08-31/ HTTP/1.1" 500 106991
ERROR 2022-12-31 17:33:15,211 log 72192 75340 Internal Server Error: /rest_api/voyages/1/2/2022-08-31/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
TypeError: VoyageViewSet.search_voyages() got an unexpected keyword argument 'departure_station'
ERROR 2022-12-31 17:33:18,722 log 75036 60448 Internal Server Error: /rest_api/voyages/1/2/2022-08-31/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
TypeError: VoyageViewSet.search_voyages() got multiple values for argument 'departure_station'
ERROR 2022-12-31 17:33:20,062 log 75036 80344 Internal Server Error: /rest_api/voyages/1/2/2022-08-31/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
TypeError: VoyageViewSet.search_voyages() got multiple values for argument 'departure_station'
ERROR 2022-12-31 17:33:20,443 basehttp 75036 80344 "GET /rest_api/voyages/1/2/2022-08-31/ HTTP/1.1" 500 106979
ERROR 2022-12-31 17:33:36,472 log 75036 80344 Internal Server Error: /rest_api/voyages/1/2/2022-08-31/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
TypeError: VoyageViewSet.search_voyages() got multiple values for argument 'departure_station'
ERROR 2022-12-31 17:33:36,913 basehttp 75036 80344 "GET /rest_api/voyages/1/2/2022-08-31/ HTTP/1.1" 500 106979
ERROR 2022-12-31 17:33:40,977 log 42004 82044 Internal Server Error: /rest_api/voyages/1/2/2022-08-31/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 511, in dispatch
    self.response = self.finalize_response(request, response, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 423, in finalize_response
    assert isinstance(response, HttpResponseBase), (
AssertionError: Expected a `Response`, `HttpResponse` or `HttpStreamingResponse` to be returned from the view, but received a `<class 'list'>`
ERROR 2022-12-31 17:33:41,517 basehttp 42004 82044 "GET /rest_api/voyages/1/2/2022-08-31/ HTTP/1.1" 500 98154
ERROR 2023-01-03 15:29:49,411 log 92596 78704 Internal Server Error: /rest_api/purchased_tickets/3,9/1/leningradskiy-railway-station-1/moskovskiy-railway-station-2/15/18/Europe-Moscow/RU/9037930202/fms160602@gmail.com/example_pdf/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 103, in process_purchase
    print(serializer.is_valid())
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 220, in is_valid
    assert hasattr(self, 'initial_data'), (
AssertionError: Cannot call `.is_valid()` as no `data=` keyword argument was passed when instantiating the serializer instance.
ERROR 2023-01-03 15:29:49,841 basehttp 92596 78704 "POST /rest_api/purchased_tickets/3,9/1/leningradskiy-railway-station-1/moskovskiy-railway-station-2/15/18/Europe-Moscow/RU/9037930202/fms160602@gmail.com/example_pdf/ HTTP/1.1" 500 121580
ERROR 2023-01-03 23:49:02,302 purchase_handler 93356 89500 [WinError 10061] Подключение не установлено, т.к. конечный компьютер отверг запрос на подключение
ERROR 2023-01-06 14:52:39,092 log 101352 98412 Internal Server Error: /rest_api/purchased_tickets/3,9/1/15/18/Europe-Moscow/RU/9037930202/fms160602@gmail.com/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 105, in process_purchase
    created_tickets = purchase_handler.process_purchase()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 22, in process_purchase
    db_ticket_data = self.common_ticket_data()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 47, in common_ticket_data
    ticket_data['customers_phone_number'] = pn_object.national_number
AttributeError: 'str' object has no attribute 'national_number'
ERROR 2023-01-06 14:52:39,582 basehttp 101352 98412 "POST /rest_api/purchased_tickets/3,9/1/15/18/Europe-Moscow/RU/9037930202/fms160602@gmail.com/ HTTP/1.1" 500 122734
ERROR 2023-01-06 14:53:40,320 log 103212 93224 Internal Server Error: /rest_api/purchased_tickets/3,9/1/15/18/Europe-Moscow/RU/9037930202/fms160602@gmail.com/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 105, in process_purchase
    created_tickets = purchase_handler.process_purchase()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 22, in process_purchase
    db_ticket_data = self.common_ticket_data()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 48, in common_ticket_data
    ticket_data['customers_phone_number'] = pn_object.national_number
AttributeError: 'str' object has no attribute 'national_number'
ERROR 2023-01-06 14:53:40,801 basehttp 103212 93224 "POST /rest_api/purchased_tickets/3,9/1/15/18/Europe-Moscow/RU/9037930202/fms160602@gmail.com/ HTTP/1.1" 500 122758
ERROR 2023-01-06 15:02:36,410 log 104204 94456 Internal Server Error: /rest_api/purchased_tickets/3,9/1/15/18/Europe-Moscow/RU/9037930202/fms160602@gmail.com/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 105, in process_purchase
    created_tickets = purchase_handler.process_purchase()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 22, in process_purchase
    db_ticket_data = self.common_ticket_data()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 46, in common_ticket_data
    country_code=pn.country_code_for_region(ticket_data['customers_region_code']),
KeyError: 'customers_region_code'
ERROR 2023-01-06 15:02:36,841 basehttp 104204 94456 "POST /rest_api/purchased_tickets/3,9/1/15/18/Europe-Moscow/RU/9037930202/fms160602@gmail.com/ HTTP/1.1" 500 122132
ERROR 2023-01-06 15:03:29,421 log 97520 102660 Internal Server Error: /rest_api/purchased_tickets/3,9/1/15/18/Europe-Moscow/RU/9037930202/fms160602@gmail.com/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 105, in process_purchase
    created_tickets = purchase_handler.process_purchase()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 23, in process_purchase
    voyage = Voyage.objects.select_for_update().get(pk=self.data['voyage_pk'])
KeyError: 'voyage_pk'
ERROR 2023-01-06 15:03:29,915 basehttp 97520 102660 "POST /rest_api/purchased_tickets/3,9/1/15/18/Europe-Moscow/RU/9037930202/fms160602@gmail.com/ HTTP/1.1" 500 119273
ERROR 2023-01-07 01:08:05,631 log 102024 14932 Internal Server Error: /rest_api/purchased_tickets/3/15/18/238,239/Europe-Moscow/RU/9037930202/fms160602@gmail.com/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 103, in process_purchase
    serializer.is_valid(raise_exception=True)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 227, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 429, in run_validation
    value = self.validate(value)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\serializers.py", line 76, in validate
    for seat_number in tuple(self.data['seat_numbers'].split(',')):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 555, in data
    ret = super().data
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 249, in data
    raise AssertionError(msg)
AssertionError: When a serializer is passed a `data` keyword argument you must call `.is_valid()` before attempting to access the serialized `.data` representation.
You should either call `.is_valid()` first, or access `.initial_data` instead.
ERROR 2023-01-07 01:08:06,085 basehttp 102024 14932 "POST /rest_api/purchased_tickets/3/15/18/238,239/Europe-Moscow/RU/9037930202/fms160602@gmail.com/ HTTP/1.1" 500 143089
ERROR 2023-01-07 01:09:03,007 log 99744 94412 Internal Server Error: /rest_api/purchased_tickets/3/15/18/238,239/Europe-Moscow/RU/9037930202/fms160602@gmail.com/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 103, in process_purchase
    serializer.is_valid(raise_exception=True)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 227, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 429, in run_validation
    value = self.validate(value)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\serializers.py", line 76, in validate
    for seat_number in tuple(self.data['seat_numbers'].split(',')):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 555, in data
    ret = super().data
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 249, in data
    raise AssertionError(msg)
AssertionError: When a serializer is passed a `data` keyword argument you must call `.is_valid()` before attempting to access the serialized `.data` representation.
You should either call `.is_valid()` first, or access `.initial_data` instead.
ERROR 2023-01-07 01:09:03,491 basehttp 99744 94412 "POST /rest_api/purchased_tickets/3/15/18/238,239/Europe-Moscow/RU/9037930202/fms160602@gmail.com/ HTTP/1.1" 500 143098
ERROR 2023-01-07 01:11:22,590 purchase_handler 92912 102064 [WinError 10061] Подключение не установлено, т.к. конечный компьютер отверг запрос на подключение
ERROR 2023-01-07 01:11:22,671 log 92912 102064 Internal Server Error: /rest_api/purchased_tickets/3/15/18/238,239/Europe-Moscow/RU/9037930202/fms160602@gmail.com/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 109, in process_purchase
    serializer.is_valid(raise_exception=True)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 741, in is_valid
    assert hasattr(self, 'initial_data'), (
AssertionError: Cannot call `.is_valid()` as no `data=` keyword argument was passed when instantiating the serializer instance.
ERROR 2023-01-07 01:11:23,188 basehttp 92912 102064 "POST /rest_api/purchased_tickets/3/15/18/238,239/Europe-Moscow/RU/9037930202/fms160602@gmail.com/ HTTP/1.1" 500 129375
ERROR 2023-01-07 01:12:21,152 purchase_handler 102220 39532 [WinError 10061] Подключение не установлено, т.к. конечный компьютер отверг запрос на подключение
ERROR 2023-01-07 01:12:21,259 log 102220 39532 Internal Server Error: /rest_api/purchased_tickets/3/15/18/238,239/Europe-Moscow/RU/9037930202/fms160602@gmail.com/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 446, in get_attribute
    return get_attribute(instance, self.source_attrs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 96, in get_attribute
    instance = getattr(instance, attr)
AttributeError: 'str' object has no attribute 'customers_phone_number'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 109, in process_purchase
    return Response(serializer.data)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 768, in data
    ret = super().data
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 253, in data
    self._data = self.to_representation(self.instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 686, in to_representation
    return [
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 687, in <listcomp>
    self.child.to_representation(item) for item in iterable
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 509, in to_representation
    attribute = field.get_attribute(instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 479, in get_attribute
    raise type(exc)(msg)
AttributeError: Got AttributeError when attempting to get a value for field `customers_phone_number` on serializer `PurchasedTicketSerializer`.
The serializer field might be named incorrectly and not match any attribute or key on the `str` instance.
Original exception text was: 'str' object has no attribute 'customers_phone_number'.
ERROR 2023-01-07 01:12:21,735 basehttp 102220 39532 "POST /rest_api/purchased_tickets/3/15/18/238,239/Europe-Moscow/RU/9037930202/fms160602@gmail.com/ HTTP/1.1" 500 183218
ERROR 2023-01-07 01:14:20,871 purchase_handler 87756 78992 [WinError 10061] Подключение не установлено, т.к. конечный компьютер отверг запрос на подключение
ERROR 2023-01-07 01:14:20,974 log 87756 78992 Internal Server Error: /rest_api/purchased_tickets/3/15/18/238,239/Europe-Moscow/RU/9037930202/fms160602@gmail.com/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 446, in get_attribute
    return get_attribute(instance, self.source_attrs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 96, in get_attribute
    instance = getattr(instance, attr)
AttributeError: 'str' object has no attribute 'customers_phone_number'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 109, in process_purchase
    return Response(serializer.data)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 768, in data
    ret = super().data
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 253, in data
    self._data = self.to_representation(self.instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 686, in to_representation
    return [
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 687, in <listcomp>
    self.child.to_representation(item) for item in iterable
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 509, in to_representation
    attribute = field.get_attribute(instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 479, in get_attribute
    raise type(exc)(msg)
AttributeError: Got AttributeError when attempting to get a value for field `customers_phone_number` on serializer `PurchasedTicketSerializer`.
The serializer field might be named incorrectly and not match any attribute or key on the `str` instance.
Original exception text was: 'str' object has no attribute 'customers_phone_number'.
ERROR 2023-01-07 01:14:21,462 basehttp 87756 78992 "POST /rest_api/purchased_tickets/3/15/18/238,239/Europe-Moscow/RU/9037930202/fms160602@gmail.com/ HTTP/1.1" 500 183251
ERROR 2023-01-07 01:15:30,121 log 87756 78992 Internal Server Error: /rest_api/purchased_tickets/3/15/18/238,239/Europe-Moscow/RU/9037930202/fms160602@gmail.com/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 446, in get_attribute
    return get_attribute(instance, self.source_attrs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 96, in get_attribute
    instance = getattr(instance, attr)
AttributeError: 'str' object has no attribute 'customers_phone_number'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 109, in process_purchase
    return Response(serializer.data)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 768, in data
    ret = super().data
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 253, in data
    self._data = self.to_representation(self.instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 686, in to_representation
    return [
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 687, in <listcomp>
    self.child.to_representation(item) for item in iterable
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 509, in to_representation
    attribute = field.get_attribute(instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 479, in get_attribute
    raise type(exc)(msg)
AttributeError: Got AttributeError when attempting to get a value for field `customers_phone_number` on serializer `PurchasedTicketSerializer`.
The serializer field might be named incorrectly and not match any attribute or key on the `str` instance.
Original exception text was: 'str' object has no attribute 'customers_phone_number'.
ERROR 2023-01-07 01:15:30,527 basehttp 87756 78992 "POST /rest_api/purchased_tickets/3/15/18/238,239/Europe-Moscow/RU/9037930202/fms160602@gmail.com/ HTTP/1.1" 500 183241
ERROR 2023-01-07 01:21:52,428 log 55364 96464 Internal Server Error: /rest_api/purchased_tickets/3/15/18/237,236/Europe-Moscow/RU/9037930202/fms160602@gmail.com/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 446, in get_attribute
    return get_attribute(instance, self.source_attrs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 96, in get_attribute
    instance = getattr(instance, attr)
AttributeError: 'str' object has no attribute 'customers_phone_number'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 112, in process_purchase
    return Response(serializer.data)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 768, in data
    ret = super().data
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 253, in data
    self._data = self.to_representation(self.instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 686, in to_representation
    return [
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 687, in <listcomp>
    self.child.to_representation(item) for item in iterable
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 509, in to_representation
    attribute = field.get_attribute(instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 479, in get_attribute
    raise type(exc)(msg)
AttributeError: Got AttributeError when attempting to get a value for field `customers_phone_number` on serializer `PurchasedTicketSerializer`.
The serializer field might be named incorrectly and not match any attribute or key on the `str` instance.
Original exception text was: 'str' object has no attribute 'customers_phone_number'.
ERROR 2023-01-07 01:21:52,930 basehttp 55364 96464 "POST /rest_api/purchased_tickets/3/15/18/237,236/Europe-Moscow/RU/9037930202/fms160602@gmail.com/ HTTP/1.1" 500 183271
ERROR 2023-01-07 01:22:33,117 log 86140 54256 Internal Server Error: /rest_api/purchased_tickets/3/15/18/325/Europe-Moscow/RU/9037930202/fms160602@gmail.com/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 446, in get_attribute
    return get_attribute(instance, self.source_attrs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 96, in get_attribute
    instance = getattr(instance, attr)
AttributeError: 'str' object has no attribute 'customers_phone_number'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 112, in process_purchase
    return Response(serializer.data)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 768, in data
    ret = super().data
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 253, in data
    self._data = self.to_representation(self.instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 686, in to_representation
    return [
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 687, in <listcomp>
    self.child.to_representation(item) for item in iterable
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\serializers.py", line 509, in to_representation
    attribute = field.get_attribute(instance)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\fields.py", line 479, in get_attribute
    raise type(exc)(msg)
AttributeError: Got AttributeError when attempting to get a value for field `customers_phone_number` on serializer `PurchasedTicketSerializer`.
The serializer field might be named incorrectly and not match any attribute or key on the `str` instance.
Original exception text was: 'str' object has no attribute 'customers_phone_number'.
ERROR 2023-01-07 01:22:33,646 basehttp 86140 54256 "POST /rest_api/purchased_tickets/3/15/18/325/Europe-Moscow/RU/9037930202/fms160602@gmail.com/ HTTP/1.1" 500 183206
ERROR 2023-01-07 01:29:47,084 purchase_handler 96904 29944 database is locked
ERROR 2023-01-07 01:46:01,153 log 105948 40120 Internal Server Error: /rest_api/purchased_tickets/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 91, in list
    serializer = self.get_serializer(self.get_queryset(), many=True)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 99, in get_queryset
    queryset.filter(customers_phonenumber=customers_phonenumber)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\models\query.py", line 1420, in filter
    return self._filter_or_exclude(False, args, kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\models\query.py", line 1438, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\models\query.py", line 1445, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\models\sql\query.py", line 1532, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\models\sql\query.py", line 1562, in _add_q
    child_clause, needed_inner = self.build_filter(
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\models\sql\query.py", line 1407, in build_filter
    lookups, parts, reffed_expression = self.solve_lookup_type(arg)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\models\sql\query.py", line 1217, in solve_lookup_type
    _, field, _, lookup_parts = self.names_to_path(lookup_splitted, self.get_meta())
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\models\sql\query.py", line 1709, in names_to_path
    raise FieldError(
django.core.exceptions.FieldError: Cannot resolve keyword 'customers_phonenumber' into field. Choices are: arrival_station, arrival_station_id, customers_phone_number, customers_region_code, customers_timezone, departure_station, departure_station_id, id, pdf_filename, purchase_datetime, seat_number, voyage, voyage_id
ERROR 2023-01-07 01:46:01,807 basehttp 105948 40120 "GET /rest_api/purchased_tickets/?customers_phonenumber=9037930202 HTTP/1.1" 500 165693
ERROR 2023-01-07 12:09:52,247 log 107332 71400 Internal Server Error: /rest_api/auth/users
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\utils\deprecation.py", line 135, in __call__
    response = self.process_request(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\middleware\common.py", line 54, in process_request
    path = self.get_full_path_with_slash(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\middleware\common.py", line 88, in get_full_path_with_slash
    raise RuntimeError(
RuntimeError: You called this URL via POST, but the URL doesn't end in a slash and you have APPEND_SLASH set. Django can't redirect to the slash URL while maintaining POST data. Change your form to point to 127.0.0.1:8000/rest_api/auth/users/ (note the trailing slash), or set APPEND_SLASH=False in your Django settings.
ERROR 2023-01-07 12:09:52,251 basehttp 107332 71400 "POST /rest_api/auth/users HTTP/1.1" 500 76762
ERROR 2023-01-07 12:11:10,147 log 107332 101192 Internal Server Error: /rest_api/auth/token/login/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\djoser\utils.py", line 38, in post
    return self._action(serializer)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\djoser\views.py", line 25, in _action
    token = utils.login_user(self.request, serializer.user)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\djoser\utils.py", line 17, in login_user
    token, _ = settings.TOKEN_MODEL.objects.get_or_create(user=user)
AttributeError: type object 'Token' has no attribute 'objects'
ERROR 2023-01-07 12:11:10,574 basehttp 107332 101192 "POST /rest_api/auth/token/login/ HTTP/1.1" 500 115490
ERROR 2023-01-07 12:11:55,173 log 107332 101192 Internal Server Error: /rest_api/auth/token/login/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\djoser\utils.py", line 38, in post
    return self._action(serializer)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\djoser\views.py", line 25, in _action
    token = utils.login_user(self.request, serializer.user)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\djoser\utils.py", line 17, in login_user
    token, _ = settings.TOKEN_MODEL.objects.get_or_create(user=user)
AttributeError: type object 'Token' has no attribute 'objects'
ERROR 2023-01-07 12:11:55,583 basehttp 107332 101192 "POST /rest_api/auth/token/login/ HTTP/1.1" 500 115490
ERROR 2023-01-07 12:13:17,079 log 82608 106636 Internal Server Error: /rest_api/auth/token/login/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\djoser\utils.py", line 38, in post
    return self._action(serializer)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\djoser\views.py", line 25, in _action
    token = utils.login_user(self.request, serializer.user)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\djoser\utils.py", line 17, in login_user
    token, _ = settings.TOKEN_MODEL.objects.get_or_create(user=user)
AttributeError: type object 'Token' has no attribute 'objects'
ERROR 2023-01-07 12:13:17,504 basehttp 82608 106636 "POST /rest_api/auth/token/login/ HTTP/1.1" 500 115491
ERROR 2023-01-07 12:19:24,824 log 105876 103960 Internal Server Error: /rest_api/auth/token/login/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\backends\utils.py", line 89, in _execute
    return self.cursor.execute(sql, params)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\backends\sqlite3\base.py", line 357, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.OperationalError: no such table: authtoken_token

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\djoser\utils.py", line 38, in post
    return self._action(serializer)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\djoser\views.py", line 25, in _action
    token = utils.login_user(self.request, serializer.user)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\djoser\utils.py", line 17, in login_user
    token, _ = settings.TOKEN_MODEL.objects.get_or_create(user=user)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\models\query.py", line 928, in get_or_create
    return self.get(**kwargs), False
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\models\query.py", line 646, in get
    num = len(clone)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\models\query.py", line 376, in __len__
    self._fetch_all()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\models\query.py", line 1866, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\models\query.py", line 87, in __iter__
    results = compiler.execute_sql(
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\models\sql\compiler.py", line 1398, in execute_sql
    cursor.execute(sql, params)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\debug_toolbar\panels\sql\tracking.py", line 230, in execute
    return self._record(self.cursor.execute, sql, params)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\debug_toolbar\panels\sql\tracking.py", line 154, in _record
    return method(sql, params)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\backends\utils.py", line 103, in execute
    return super().execute(sql, params)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\backends\utils.py", line 67, in execute
    return self._execute_with_wrappers(
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\backends\utils.py", line 80, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\backends\utils.py", line 84, in _execute
    with self.db.wrap_database_errors:
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\backends\utils.py", line 89, in _execute
    return self.cursor.execute(sql, params)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\db\backends\sqlite3\base.py", line 357, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.OperationalError: no such table: authtoken_token
ERROR 2023-01-07 12:19:25,285 basehttp 105876 103960 "POST /rest_api/auth/token/login/ HTTP/1.1" 500 199782
ERROR 2023-01-07 13:20:18,723 log 95416 105944 Internal Server Error: /rest_api/purchased_tickets/purchase/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 113, in process_purchase
    created_tickets = purchase_handler.process_purchase(forced_method='realtime')
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 25, in process_purchase
    db_ticket_data = self.common_ticket_data()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 49, in common_ticket_data
    country_code=pn.country_code_for_region(self.data['customers_region_code']),
KeyError: 'customers_region_code'
ERROR 2023-01-07 13:20:19,314 basehttp 95416 105944 "POST /rest_api/purchased_tickets/purchase/ HTTP/1.1" 500 120217
ERROR 2023-01-07 13:21:13,353 log 93680 94120 Internal Server Error: /rest_api/purchased_tickets/purchase/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 113, in process_purchase
    created_tickets = purchase_handler.process_purchase(forced_method='realtime')
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 25, in process_purchase
    db_ticket_data = self.common_ticket_data()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 50, in common_ticket_data
    country_code=pn.country_code_for_region(self.data['customers_region_code']),
KeyError: 'customers_region_code'
ERROR 2023-01-07 13:21:13,814 basehttp 93680 94120 "POST /rest_api/purchased_tickets/purchase/ HTTP/1.1" 500 120193
ERROR 2023-01-07 13:21:36,623 log 90780 11316 Internal Server Error: /rest_api/purchased_tickets/purchase/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 113, in process_purchase
    created_tickets = purchase_handler.process_purchase(forced_method='realtime')
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 25, in process_purchase
    db_ticket_data = self.common_ticket_data()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 49, in common_ticket_data
    self.data['customers_phone_number'] = pn.PhoneNumber(
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\http\request.py", line 526, in __setitem__
    self._assert_mutable()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\http\request.py", line 523, in _assert_mutable
    raise AttributeError("This QueryDict instance is immutable")
AttributeError: This QueryDict instance is immutable
ERROR 2023-01-07 13:21:37,114 basehttp 90780 11316 "POST /rest_api/purchased_tickets/purchase/ HTTP/1.1" 500 128871
ERROR 2023-01-07 13:22:41,578 log 98092 94316 Internal Server Error: /rest_api/purchased_tickets/purchase/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\rest_api\views.py", line 112, in process_purchase
    purchase_handler = TicketsPurchaseHandler(request.data)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 18, in __init__
    self.data = form_data.to_dict()
AttributeError: 'QueryDict' object has no attribute 'to_dict'
ERROR 2023-01-07 13:22:42,114 basehttp 98092 94316 "POST /rest_api/purchased_tickets/purchase/ HTTP/1.1" 500 116477
ERROR 2023-01-07 13:55:17,503 log 68396 97792 Internal Server Error: /rest_api/purchased_tickets/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 310, in perform_content_negotiation
    return conneg.select_renderer(request, renderers, self.format_kwarg)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\negotiation.py", line 78, in select_renderer
    raise exceptions.NotAcceptable(available_renderers=renderers)
rest_framework.exceptions.NotAcceptable: Could not satisfy the request Accept header.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 511, in dispatch
    self.response = self.finalize_response(request, response, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 431, in finalize_response
    neg = self.perform_content_negotiation(request, force=True)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\rest_framework\views.py", line 313, in perform_content_negotiation
    return (renderers[0], renderers[0].media_type)
IndexError: list index out of range
ERROR 2023-01-07 13:55:17,915 basehttp 68396 97792 "GET /rest_api/purchased_tickets/?limit=10&offset=10 HTTP/1.1" 500 112307
ERROR 2023-01-14 00:13:00,664 log 34084 34120 Internal Server Error: /search/voyages/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 27, in get
    print(type(reverse('list_voyages')))
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\urls\base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\urls\resolvers.py", line 828, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'list_voyages' not found. 'list_voyages' is not a valid view function or pattern name.
ERROR 2023-01-14 00:13:01,160 basehttp 34084 34120 "GET /search/voyages/?departure_station=leningradskiy-railway-station-1&arrival_station=moskovskiy-railway-station-2&departure_date=2022-08-31&country=russia HTTP/1.1" 500 105261
ERROR 2023-01-14 19:33:19,591 log 40644 41520 Internal Server Error: /search/voyages/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 35, in get
    data = json_serializer.serialize(Voyage.objects.all(), stream='out')
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\serializers\base.py", line 130, in serialize
    self.start_serialization()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\serializers\json.py", line 36, in start_serialization
    self.stream.write("[")
AttributeError: 'str' object has no attribute 'write'
ERROR 2023-01-14 19:33:20,047 basehttp 40644 41520 "GET /search/voyages/?departure_station=leningradskiy-railway-station-1&arrival_station=moskovskiy-railway-station-2&departure_date=2022-08-31&country=russia HTTP/1.1" 500 105483
ERROR 2023-01-14 19:39:41,629 log 34340 42224 Internal Server Error: /search/voyages/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 36, in get
    data = json_serializer.serialize(SiteSetting.objects.all(), stream=out)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\serializers\base.py", line 168, in serialize
    self.end_object(obj)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\serializers\json.py", line 54, in end_object
    json.dump(self.get_dump_object(obj), self.stream, **self.json_kwargs)
  File "C:\Users\Matvey\AppData\Local\Programs\Python\Python310\lib\json\__init__.py", line 180, in dump
    fp.write(chunk)
  File "C:\Users\Matvey\AppData\Local\Programs\Python\Python310\lib\encodings\cp1251.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
UnicodeEncodeError: 'charmap' codec can't encode character '\u20bd' in position 1: character maps to <undefined>
ERROR 2023-01-14 19:39:42,127 basehttp 34340 42224 "GET /search/voyages/?departure_station=leningradskiy-railway-station-1&arrival_station=moskovskiy-railway-station-2&departure_date=2022-08-31&country=russia HTTP/1.1" 500 117157
ERROR 2023-01-16 00:29:12,697 log 34516 39604 Internal Server Error: /search/voyages/3/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\utils\datastructures.py", line 84, in __getitem__
    list_ = super().__getitem__(key)
KeyError: 'departure_en_route'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 77, in dispatch
    self.populate_attributes_with_voyage_info()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 130, in populate_attributes_with_voyage_info
    StationInVoyage.objects.filter(pk=self.request.GET['departure_en_route']).select_related('station')[0]
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\utils\datastructures.py", line 86, in __getitem__
    raise MultiValueDictKeyError(key)
django.utils.datastructures.MultiValueDictKeyError: 'departure_en_route'
ERROR 2023-01-16 00:29:13,137 basehttp 34516 39604 "GET /search/voyages/3/ HTTP/1.1" 500 99953
ERROR 2023-01-16 00:30:12,919 log 34516 39604 Internal Server Error: /search/voyages/3/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\utils\datastructures.py", line 84, in __getitem__
    list_ = super().__getitem__(key)
KeyError: 'arrival_en_route'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 77, in dispatch
    self.populate_attributes_with_voyage_info()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 133, in populate_attributes_with_voyage_info
    StationInVoyage.objects.filter(pk=self.request.GET['arrival_en_route']).select_related('station')[0]
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\utils\datastructures.py", line 86, in __getitem__
    raise MultiValueDictKeyError(key)
django.utils.datastructures.MultiValueDictKeyError: 'arrival_en_route'
ERROR 2023-01-16 00:30:13,324 basehttp 34516 39604 "GET /search/voyages/3/?departure_en_route=15 HTTP/1.1" 500 100785
ERROR 2023-01-17 22:48:54,286 log 7540 16772 Internal Server Error: /search/voyages/3/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 82, in dispatch
    return super(DetailedVoyageView, self).dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\edit.py", line 153, in post
    return self.form_valid(form)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 85, in form_valid
    purchase_handler = TicketsPurchaseHandler(form.cleaned_data)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 18, in __init__
    self.data = form_data.dict()
AttributeError: 'dict' object has no attribute 'dict'
ERROR 2023-01-17 22:48:54,776 basehttp 7540 16772 "POST /search/voyages/3/?departure_en_route=15&arrival_en_route=18 HTTP/1.1" 500 108857
ERROR 2023-01-17 22:50:20,343 log 38532 43768 Internal Server Error: /search/voyages/3/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 82, in dispatch
    return super(DetailedVoyageView, self).dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\edit.py", line 153, in post
    return self.form_valid(form)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 85, in form_valid
    purchase_handler = TicketsPurchaseHandler(form.cleaned_data)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 19, in __init__
    self.data = form_data.dict()
AttributeError: 'dict' object has no attribute 'dict'
ERROR 2023-01-17 22:50:20,864 basehttp 38532 43768 "POST /search/voyages/3/?departure_en_route=15&arrival_en_route=18 HTTP/1.1" 500 108846
ERROR 2023-01-17 22:53:08,623 log 7516 40352 Internal Server Error: /search/voyages/3/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 82, in dispatch
    return super(DetailedVoyageView, self).dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\edit.py", line 153, in post
    return self.form_valid(form)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 86, in form_valid
    purchase_status = purchase_handler.process_purchase()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 24, in process_purchase
    raise AttributeError('Invalid generation method specified. Check PDF_GENERATION_MODES setting.')
AttributeError: Invalid generation method specified. Check PDF_GENERATION_MODES setting.
ERROR 2023-01-17 22:53:09,179 basehttp 7516 40352 "POST /search/voyages/3/?departure_en_route=15&arrival_en_route=18 HTTP/1.1" 500 108959
ERROR 2023-01-17 22:55:30,086 log 6180 45636 Internal Server Error: /search/voyages/3/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 82, in dispatch
    return super(DetailedVoyageView, self).dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\edit.py", line 153, in post
    return self.form_valid(form)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 86, in form_valid
    purchase_status = purchase_handler.process_purchase()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 24, in process_purchase
    raise AttributeError('Invalid generation method specified. Check PDF_GENERATION_MODES setting.')
AttributeError: Invalid generation method specified. Check PDF_GENERATION_MODES setting.
ERROR 2023-01-17 22:55:30,773 basehttp 6180 45636 "POST /search/voyages/3/?departure_en_route=15&arrival_en_route=18 HTTP/1.1" 500 108959
ERROR 2023-01-17 22:55:35,533 log 6180 45636 Internal Server Error: /search/voyages/3/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 82, in dispatch
    return super(DetailedVoyageView, self).dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\edit.py", line 153, in post
    return self.form_valid(form)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 86, in form_valid
    purchase_status = purchase_handler.process_purchase()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 24, in process_purchase
    raise AttributeError('Invalid generation method specified. Check PDF_GENERATION_MODES setting.')
AttributeError: Invalid generation method specified. Check PDF_GENERATION_MODES setting.
ERROR 2023-01-17 22:55:35,951 basehttp 6180 45636 "POST /search/voyages/3/?departure_en_route=15&arrival_en_route=18 HTTP/1.1" 500 108959
ERROR 2023-01-17 22:56:17,601 log 47780 52288 Internal Server Error: /search/voyages/3/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 82, in dispatch
    return super(DetailedVoyageView, self).dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\edit.py", line 153, in post
    return self.form_valid(form)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 86, in form_valid
    purchase_status = purchase_handler.process_purchase()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 27, in process_purchase
    db_ticket_data = self.common_ticket_data()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\purchase_handler.py", line 52, in common_ticket_data
    country_code=pn.country_code_for_region(self.data['customers_region_code']),
KeyError: 'customers_region_code'
ERROR 2023-01-17 22:56:18,152 basehttp 47780 52288 "POST /search/voyages/3/?departure_en_route=15&arrival_en_route=18 HTTP/1.1" 500 112705
ERROR 2023-01-17 22:58:54,254 purchase_handler 34000 29872 local variable 'created_tickets' referenced before assignment
ERROR 2023-01-17 23:00:05,257 purchase_handler 34000 29872 local variable 'created_tickets' referenced before assignment
ERROR 2023-01-17 23:01:34,553 purchase_handler 52988 23476 local variable 'created_tickets' referenced before assignment
ERROR 2023-01-17 23:02:38,253 purchase_handler 28692 51448 local variable 'created_tickets' referenced before assignment
ERROR 2023-01-17 23:03:25,877 purchase_handler 22768 28124 name 'PDFGenerator' is not defined
ERROR 2023-01-17 23:04:12,949 purchase_handler 37088 26808 name 'PDFGenerator' is not defined
ERROR 2023-01-17 23:05:45,619 purchase_handler 51316 44844 name 'EmailSender' is not defined
ERROR 2023-01-18 00:08:32,394 log 53024 51164 Internal Server Error: /tickets/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 35, in get
    return super(SearchPurchasedTicketsView, self).get(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\list.py", line 174, in get
    context = self.get_context_data()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 43, in get_context_data
    context['tickets'] = self.search_tickets()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 57, in search_tickets
    national_number = pn.parse(self.request.GET['customers_phone_number_1'], region_code).national_number
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\phonenumbers\phonenumberutil.py", line 2921, in parse
    raise NumberParseException(NumberParseException.NOT_A_NUMBER,
phonenumbers.phonenumberutil.NumberParseException: (1) The string supplied did not seem to be a phone number.
ERROR 2023-01-18 00:08:32,887 basehttp 53024 51164 "GET /tickets/?customers_phone_number_0=RU&customers_phone_number_1=asdasdasd HTTP/1.1" 500 112147
ERROR 2023-01-18 00:10:25,621 log 53024 51164 Internal Server Error: /tickets/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 35, in get
    return super(SearchPurchasedTicketsView, self).get(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\list.py", line 174, in get
    context = self.get_context_data()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 43, in get_context_data
    context['tickets'] = self.search_tickets()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 57, in search_tickets
    national_number = pn.parse(self.request.GET['customers_phone_number_1'], region_code).national_number
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\phonenumbers\phonenumberutil.py", line 2927, in parse
    raise NumberParseException(NumberParseException.INVALID_COUNTRY_CODE,
phonenumbers.phonenumberutil.NumberParseException: (0) Missing or invalid default region.
ERROR 2023-01-18 00:10:26,096 basehttp 53024 51164 "GET /tickets/?customers_phone_number_0=ZZ&customers_phone_number_1=9037930201 HTTP/1.1" 500 112111
ERROR 2023-01-18 00:11:00,952 log 53024 51164 Internal Server Error: /tickets/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 35, in get
    return super(SearchPurchasedTicketsView, self).get(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\list.py", line 174, in get
    context = self.get_context_data()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 43, in get_context_data
    context['tickets'] = self.search_tickets()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 57, in search_tickets
    national_number = pn.parse(self.request.GET['customers_phone_number_1'], region_code).national_number
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\phonenumbers\phonenumberutil.py", line 2927, in parse
    raise NumberParseException(NumberParseException.INVALID_COUNTRY_CODE,
phonenumbers.phonenumberutil.NumberParseException: (0) Missing or invalid default region.
ERROR 2023-01-18 00:11:01,549 basehttp 53024 51164 "GET /tickets/?customers_phone_number_0=ZZ&customers_phone_number_1=9037930201 HTTP/1.1" 500 112111
ERROR 2023-01-18 00:11:25,817 log 53024 51164 Internal Server Error: /tickets/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 35, in get
    return super(SearchPurchasedTicketsView, self).get(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\list.py", line 174, in get
    context = self.get_context_data()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 43, in get_context_data
    context['tickets'] = self.search_tickets()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 57, in search_tickets
    national_number = pn.parse(self.request.GET['customers_phone_number_1'], region_code).national_number
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\phonenumbers\phonenumberutil.py", line 2921, in parse
    raise NumberParseException(NumberParseException.NOT_A_NUMBER,
phonenumbers.phonenumberutil.NumberParseException: (1) The string supplied did not seem to be a phone number.
ERROR 2023-01-18 00:11:26,298 basehttp 53024 51164 "GET /tickets/?customers_phone_number_0=RU&customers_phone_number_1=79037930201!asd HTTP/1.1" 500 112235
ERROR 2023-01-18 00:15:26,466 log 28872 42936 Internal Server Error: /tickets/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 35, in get
    return super(SearchPurchasedTicketsView, self).get(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\list.py", line 174, in get
    context = self.get_context_data()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 47, in get_context_data
    context['tickets'] = self.search_tickets()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 61, in search_tickets
    national_number = pn.parse(self.request.GET['customers_phone_number_1'], region_code).national_number
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\phonenumbers\phonenumberutil.py", line 2921, in parse
    raise NumberParseException(NumberParseException.NOT_A_NUMBER,
phonenumbers.phonenumberutil.NumberParseException: (1) The string supplied did not seem to be a phone number.
ERROR 2023-01-18 00:15:26,973 basehttp 28872 42936 "GET /tickets/?customers_phone_number_0=RU&customers_phone_number_1=asdasdas HTTP/1.1" 500 112108
ERROR 2023-01-18 00:16:27,510 log 34812 50280 Internal Server Error: /tickets/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 35, in get
    return super(SearchPurchasedTicketsView, self).get(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\list.py", line 174, in get
    context = self.get_context_data()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 47, in get_context_data
    context['tickets'] = self.search_tickets()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 61, in search_tickets
    national_number = pn.parse(self.request.GET['customers_phone_number_1'], region_code).national_number
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\phonenumbers\phonenumberutil.py", line 2927, in parse
    raise NumberParseException(NumberParseException.INVALID_COUNTRY_CODE,
phonenumbers.phonenumberutil.NumberParseException: (0) Missing or invalid default region.
ERROR 2023-01-18 00:16:28,124 basehttp 34812 50280 "GET /tickets/?customers_phone_number_0=ZZ&customers_phone_number_1=123123123213 HTTP/1.1" 500 112133
ERROR 2023-01-18 00:17:25,210 log 33696 8060 Internal Server Error: /tickets/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 34, in get
    return super(SearchPurchasedTicketsView, self).get(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\list.py", line 174, in get
    context = self.get_context_data()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 47, in get_context_data
    context['full_number'] = self.get_full_number()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 53, in get_full_number
    pn_obj = pn.parse(self.request.GET['customers_phone_number_1'], region_code)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\phonenumbers\phonenumberutil.py", line 2927, in parse
    raise NumberParseException(NumberParseException.INVALID_COUNTRY_CODE,
phonenumbers.phonenumberutil.NumberParseException: (0) Missing or invalid default region.
ERROR 2023-01-18 00:17:25,761 basehttp 33696 8060 "GET /tickets/?customers_phone_number_0=ZZ&customers_phone_number_1=123123123213 HTTP/1.1" 500 111856
ERROR 2023-01-18 00:17:44,454 log 33696 8060 Internal Server Error: /tickets/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 34, in get
    return super(SearchPurchasedTicketsView, self).get(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\list.py", line 174, in get
    context = self.get_context_data()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 47, in get_context_data
    context['full_number'] = self.get_full_number()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 53, in get_full_number
    pn_obj = pn.parse(self.request.GET['customers_phone_number_1'], region_code)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\phonenumbers\phonenumberutil.py", line 2927, in parse
    raise NumberParseException(NumberParseException.INVALID_COUNTRY_CODE,
phonenumbers.phonenumberutil.NumberParseException: (0) Missing or invalid default region.
ERROR 2023-01-18 00:17:44,987 basehttp 33696 8060 "GET /tickets/?customers_phone_number_0=ZZ&customers_phone_number_1=123123123213 HTTP/1.1" 500 111718
ERROR 2023-01-18 00:18:53,426 log 33696 8060 Internal Server Error: /tickets/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 34, in get
    return super(SearchPurchasedTicketsView, self).get(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\list.py", line 174, in get
    context = self.get_context_data()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 47, in get_context_data
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\views.py", line 53, in get_full_number
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\phonenumbers\phonenumberutil.py", line 2927, in parse
    raise NumberParseException(NumberParseException.INVALID_COUNTRY_CODE,
phonenumbers.phonenumberutil.NumberParseException: (0) Missing or invalid default region.
ERROR 2023-01-18 00:18:53,862 basehttp 33696 8060 "GET /tickets/?customers_phone_number_0=ZZ&customers_phone_number_1=123123123213 HTTP/1.1" 500 106528
ERROR 2023-01-20 17:20:58,413 purchase_handler 25748 26060 [WinError 10061] Подключение не установлено, т.к. конечный компьютер отверг запрос на подключение
ERROR 2023-01-20 17:30:11,449 log 20788 26404 Internal Server Error: /search/voyages/3/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 82, in dispatch
    return super(DetailedVoyageView, self).dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\edit.py", line 152, in post
    if form.is_valid():
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\forms\forms.py", line 205, in is_valid
    return self.is_bound and not self.errors
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\forms\forms.py", line 200, in errors
    self.full_clean()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\forms\forms.py", line 438, in full_clean
    self._clean_form()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\forms\forms.py", line 459, in _clean_form
    cleaned_data = self.clean()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\forms.py", line 21, in clean
    self.validate_seat_numbers()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\forms.py", line 26, in validate_seat_numbers
    print(tyype(self.cleaned_data['customers_phone_number']))
NameError: name 'tyype' is not defined
ERROR 2023-01-20 17:30:11,959 basehttp 20788 26404 "POST /search/voyages/3/?departure_en_route=15&arrival_en_route=18 HTTP/1.1" 500 123073
ERROR 2023-01-20 17:32:04,073 log 27080 11744 Internal Server Error: /search/voyages/3/
Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\utils\datastructures.py", line 84, in __getitem__
    list_ = super().__getitem__(key)
KeyError: 'customers_phone_number'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 103, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\search\views.py", line 82, in dispatch
    return super(DetailedVoyageView, self).dispatch(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\base.py", line 142, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\views\generic\edit.py", line 152, in post
    if form.is_valid():
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\forms\forms.py", line 205, in is_valid
    return self.is_bound and not self.errors
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\forms\forms.py", line 200, in errors
    self.full_clean()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\forms\forms.py", line 438, in full_clean
    self._clean_form()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\forms\forms.py", line 459, in _clean_form
    cleaned_data = self.clean()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\forms.py", line 21, in clean
    self.validate_seat_numbers()
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\Train_ticket_sales_service\tickets\forms.py", line 26, in validate_seat_numbers
    print(type(self.data['customers_phone_number']))
  File "C:\Users\Matvey\PycharmProjects\Akhenaton\venv\lib\site-packages\django\utils\datastructures.py", line 86, in __getitem__
    raise MultiValueDictKeyError(key)
django.utils.datastructures.MultiValueDictKeyError: 'customers_phone_number'
ERROR 2023-01-20 17:32:04,658 basehttp 27080 11744 "POST /search/voyages/3/?departure_en_route=15&arrival_en_route=18 HTTP/1.1" 500 132326
