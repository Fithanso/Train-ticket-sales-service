{% extends 'train_main_app/base.html' %}

{% load static %}

{% block head %}
<title>Доступные маршруты</title>
<link rel="stylesheet" href="{% static 'train_main_app/css/list_voyages.css' %}">
{% endblock %}

{% block main %}
<div id="list_suitable_voyages" class="container-fluid">
<div id="voyages_list_upper_message">
    {% if not voyages %}
    <h1>No voyages were found</h1>
    {% endif %}
</div>

<div id="voyages_list">
{% for v in voyages %}
    <div class="voyage_card">
    <h2>{{ v.voyage }}</h2>
        <div class="departure_block">
            <p class="departure_time">{{ v.voyage.departure_datetime }}</p>
            <p class="departure_station"> {{ v.departure_station.name }}</p>
        </div>
        <div class="arrival_block">
            <p class="departure_time">{{ v.arrival_datetime }}</p>
            <p class="departure_station"> {{ v.arrival_station.name }}</p>
        </div>
    <h3>Stations en route:</h3>

    <div style="display: inline">
    {% for station in v.stations_en_route %}
        {% if station.station == v.departure_station or station.station == v.arrival_station %}
            <span style="color: red"> {{ station.station.name }} </span><span>{% if not forloop.last %} ---- {% endif %} </span>
        {% else %}
            <span> {{ station.station.name }} {% if not forloop.last %} ---- {% endif %} </span>
        {% endif %}
    {% endfor %}
    </div>

    <h3>Prices:</h3>
    <h4>Normal seat: {{ v.seat_prices.normal_seat_price }}</h4>
    <h4>Business class seat: {{ v.seat_prices.bc_seat_price }}</h4>

    <a href="{{ v.link_to_purchase }}"><button class="submit_button">Buy ticket</button></a>

    <hr>
    </div>
{% endfor %}
</div>
</div>
{% endblock %}